<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:BuildLogDashboard.ViewModels"
        xmlns:m="using:BuildLogDashboard.Models"
        xmlns:md="clr-namespace:Markdown.Avalonia;assembly=Markdown.Avalonia"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="1400" d:DesignHeight="900"
        x:Class="BuildLogDashboard.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Title="Android OS Image Build Log Dashboard"
        Width="1400" Height="900"
        CanResize="False"
        Background="{StaticResource GlassBackgroundBrush}">

    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>

    <Panel>
    <Grid RowDefinitions="Auto,*,Auto">

        <!-- Toolbar -->
        <Border Grid.Row="0"
                Background="{StaticResource GlassPanelTranslucentBrush}"
                BorderBrush="{StaticResource GlassBorderBrush}"
                BorderThickness="0,0,0,1"
                Padding="12,8">
            <Grid ColumnDefinitions="Auto,Auto,*,Auto">
                <!-- Left toolbar buttons -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="8">
                    <Button Command="{Binding OpenFolderCommand}"
                            ToolTip.Tip="Open Workspace Folder"
                            Padding="12,8"
                            Classes="btn-light-gray"
                            Background="{StaticResource GlassAppleLightGrayBrush}"
                            Foreground="#333333"
                            IsVisible="{Binding HasWorkspaceLoaded}">
                        <StackPanel Orientation="Horizontal" Spacing="6">
                            <PathIcon Data="M2 6C2 4.89543 2.89543 4 4 4H9L11 6H20C21.1046 6 22 6.89543 22 8V18C22 19.1046 21.1046 20 20 20H4C2.89543 20 2 19.1046 2 18V6Z"
                                      Width="16" Height="16" Foreground="#333333"/>
                            <TextBlock Text="Open Folder" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>

                    <Button Command="{Binding SaveBuildCommand}"
                            ToolTip.Tip="Save Current Build"
                            Padding="12,8"
                            Classes="btn-save"
                            Background="{Binding IsSaved, Converter={StaticResource SaveButtonBackgroundConverter}}"
                            Foreground="White"
                            IsEnabled="{Binding CanSave}">
                        <Panel>
                            <!-- Unsaved state: Save icon + "Save" -->
                            <StackPanel Orientation="Horizontal" Spacing="6"
                                        IsVisible="{Binding IsSaved, Converter={StaticResource InverseBoolConverter}}">
                                <PathIcon Data="M17 3H5C3.89 3 3 3.9 3 5V19C3 20.1 3.89 21 5 21H19C20.1 21 21 20.1 21 19V7L17 3ZM19 19H5V5H16.17L19 7.83V19ZM12 12C10.34 12 9 13.34 9 15S10.34 18 12 18 15 16.66 15 15 13.66 12 12 12ZM6 6H15V10H6V6Z"
                                          Width="16" Height="16" Foreground="White"/>
                                <TextBlock Text="Save" VerticalAlignment="Center"/>
                            </StackPanel>
                            <!-- Saved state: Checkmark + "Saved" -->
                            <StackPanel Orientation="Horizontal" Spacing="6"
                                        IsVisible="{Binding IsSaved}">
                                <PathIcon Data="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"
                                          Width="16" Height="16" Foreground="White"/>
                                <TextBlock Text="Saved" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Panel>
                    </Button>

                    <Rectangle Width="1" Fill="{StaticResource GlassBorderBrush}" Margin="8,4"/>

                    <Button Command="{Binding ImportMarkdownCommand}"
                            ToolTip.Tip="Import Markdown File"
                            Padding="12,8"
                            Classes="btn-red"
                            Background="{StaticResource GlassAppleRedBrush}"
                            Foreground="White">
                        <StackPanel Orientation="Horizontal" Spacing="6">
                            <PathIcon Data="M5 20H19V18H5V20ZM19 9H15V3H9V9H5L12 16L19 9Z" Width="16" Height="16" Foreground="White"/>
                            <TextBlock Text="Import" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Button>

                    <Button ToolTip.Tip="Export Build Log"
                            Padding="12,8"
                            Classes="btn-success"
                            Background="{StaticResource GlassSuccessBrush}"
                            Foreground="White"
                            IsEnabled="{Binding CanExport}">
                        <Button.Flyout>
                            <MenuFlyout Placement="Bottom">
                                <MenuItem Header="Export as Markdown (.md)" Command="{Binding ExportMarkdownCommand}">
                                    <MenuItem.Icon>
                                        <PathIcon Data="M14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V8L14 2ZM16 18H8V16H16V18ZM16 14H8V12H16V14ZM13 9V3.5L18.5 9H13Z" Width="14" Height="14"/>
                                    </MenuItem.Icon>
                                </MenuItem>
                                <MenuItem Header="Export as HTML (.html)" Command="{Binding ExportHtmlCommand}">
                                    <MenuItem.Icon>
                                        <PathIcon Data="M12 17.27L18.18 21L16.54 13.97L22 9.24L14.81 8.63L12 2L9.19 8.63L2 9.24L7.46 13.97L5.82 21L12 17.27Z" Width="14" Height="14"/>
                                    </MenuItem.Icon>
                                </MenuItem>
                                <MenuItem Header="Export as PDF (.pdf)" Command="{Binding ExportPdfCommand}">
                                    <MenuItem.Icon>
                                        <PathIcon Data="M20 2H8C6.9 2 6 2.9 6 4V16C6 17.1 6.9 18 8 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2ZM20 16H8V4H20V16ZM4 6H2V20C2 21.1 2.9 22 4 22H18V20H4V6ZM16 12V9C16 8.45 15.55 8 15 8H13V13H15C15.55 13 16 12.55 16 12ZM14 9H15V12H14V9ZM18 11H17V10H18V9H17V8H19V13H17V11Z" Width="14" Height="14"/>
                                    </MenuItem.Icon>
                                </MenuItem>
                                <Separator/>
                                <MenuItem Header="Delete Markdown File..." Command="{Binding DeleteMarkdownFileCommand}">
                                    <MenuItem.Icon>
                                        <PathIcon Data="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z" Width="14" Height="14" Foreground="#D13438"/>
                                    </MenuItem.Icon>
                                </MenuItem>
                                <MenuItem Header="Delete HTML File..." Command="{Binding DeleteHtmlFileCommand}">
                                    <MenuItem.Icon>
                                        <PathIcon Data="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z" Width="14" Height="14" Foreground="#D13438"/>
                                    </MenuItem.Icon>
                                </MenuItem>
                                <MenuItem Header="Delete PDF File..." Command="{Binding DeletePdfFileCommand}">
                                    <MenuItem.Icon>
                                        <PathIcon Data="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z" Width="14" Height="14" Foreground="#D13438"/>
                                    </MenuItem.Icon>
                                </MenuItem>
                            </MenuFlyout>
                        </Button.Flyout>
                        <StackPanel Orientation="Horizontal" Spacing="6">
                            <PathIcon Data="M9 16H15V10H19L12 3L5 10H9V16ZM5 18H19V20H5V18Z" Width="16" Height="16" Foreground="White"/>
                            <TextBlock Text="Export" VerticalAlignment="Center"/>
                            <PathIcon Data="M7 10L12 15L17 10H7Z" Width="10" Height="10" Foreground="White"/>
                        </StackPanel>
                    </Button>
                </StackPanel>

                <!-- Workspace path -->
                <Border Grid.Column="1"
                        Background="{StaticResource GlassPanelBrush}"
                        BorderBrush="{StaticResource GlassBorderBrush}"
                        BorderThickness="1"
                        CornerRadius="4"
                        Padding="8,4"
                        Margin="16,0,0,0"
                        IsVisible="{Binding WorkspacePath, Converter={x:Static StringConverters.IsNotNullOrEmpty}}">
                    <TextBlock Text="{Binding WorkspacePath}"
                               Foreground="{StaticResource GlassSubtleTextBrush}"
                               FontSize="12"
                               MaxWidth="300"
                               TextTrimming="CharacterEllipsis"/>
                </Border>

                <!-- Right toolbar buttons (placeholder) -->
                <StackPanel Grid.Column="3" Orientation="Horizontal" Spacing="8"
                            IsVisible="{Binding HasWorkspaceLoaded}">
                </StackPanel>
            </Grid>
        </Border>

        <!-- Welcome Panel (shown when no workspace loaded) -->
        <Border Grid.Row="1"
                IsVisible="{Binding !HasWorkspaceLoaded}"
                Background="{StaticResource GlassBackgroundBrush}">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Spacing="24">
                <PathIcon Data="M2 6C2 4.89543 2.89543 4 4 4H9L11 6H20C21.1046 6 22 6.89543 22 8V18C22 19.1046 21.1046 20 20 20H4C2.89543 20 2 19.1046 2 18V6Z"
                          Width="80" Height="80" Foreground="{StaticResource GlassSubtleTextBrush}"/>
                <TextBlock Text="Welcome to Build Log Dashboard"
                           FontSize="28"
                           FontWeight="SemiBold"
                           Foreground="{StaticResource GlassTextBrush}"
                           HorizontalAlignment="Center"/>
                <TextBlock Text="Click 'Open Folder' to load an Android image workspace&#x0a;or 'Import' to load an existing markdown build log."
                           FontSize="14"
                           Foreground="{StaticResource GlassSubtleTextBrush}"
                           HorizontalAlignment="Center"
                           TextAlignment="Center"
                           LineHeight="22"/>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="16" Margin="0,16,0,0">
                    <Button Command="{Binding OpenFolderCommand}"
                            Padding="20,12"
                            Classes="btn-light-gray"
                            Background="{StaticResource GlassAppleLightGrayBrush}"
                            Foreground="#333333">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <PathIcon Data="M2 6C2 4.89543 2.89543 4 4 4H9L11 6H20C21.1046 6 22 6.89543 22 8V18C22 19.1046 21.1046 20 20 20H4C2.89543 20 2 19.1046 2 18V6Z"
                                      Width="18" Height="18" Foreground="#333333"/>
                            <TextBlock Text="Open Folder" VerticalAlignment="Center" FontSize="14"/>
                        </StackPanel>
                    </Button>
                    <Button Command="{Binding ImportMarkdownCommand}"
                            Padding="20,12"
                            Classes="btn-red"
                            Background="{StaticResource GlassAppleRedBrush}"
                            Foreground="White">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <PathIcon Data="M5 20H19V18H5V20ZM19 9H15V3H9V9H5L12 16L19 9Z" Width="18" Height="18" Foreground="White"/>
                            <TextBlock Text="Import Markdown" VerticalAlignment="Center" FontSize="14"/>
                        </StackPanel>
                    </Button>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- Main Content (shown when workspace loaded) -->
        <Grid Grid.Row="1" ColumnDefinitions="240,*" IsVisible="{Binding HasWorkspaceLoaded}">

            <!-- Section Navigation Sidebar -->
            <Border Grid.Column="0"
                    Background="{StaticResource GlassPanelTranslucentBrush}"
                    BorderBrush="{StaticResource GlassBorderBrush}"
                    BorderThickness="0,0,1,0"
                    Padding="12">
                <Grid RowDefinitions="Auto,Auto,*">

                    <!-- Build Summary Card -->
                    <Border Grid.Row="0"
                            Background="{StaticResource GlassPanelBrush}"
                            BorderBrush="{StaticResource GlassBorderBrush}"
                            BorderThickness="1"
                            CornerRadius="8"
                            Padding="16"
                            Margin="0,0,0,16">
                        <StackPanel Spacing="4">
                            <TextBlock Text="{Binding SelectedBuild.BuildNumber}"
                                       FontSize="16"
                                       FontWeight="SemiBold"
                                       TextTrimming="CharacterEllipsis"
                                       Foreground="{StaticResource GlassTextBrush}"/>
                            <TextBlock Text="{Binding SelectedBuild.Device}"
                                       FontSize="13"
                                       Foreground="{StaticResource GlassSubtleTextBrush}"/>
                            <TextBlock Text="{Binding SelectedBuild.BuildDate, StringFormat={}{0:yyyy-MM-dd}}"
                                       FontSize="11"
                                       Foreground="{StaticResource GlassSubtleTextBrush}"
                                       Margin="0,2,0,0"/>
                        </StackPanel>
                    </Border>

                    <!-- Section Title -->
                    <TextBlock Grid.Row="1"
                               Text="SECTIONS"
                               FontSize="11"
                               FontWeight="SemiBold"
                               Foreground="{StaticResource GlassSubtleTextBrush}"
                               Margin="4,0,0,8"/>

                    <!-- Navigation Items -->
                    <StackPanel Grid.Row="2" Spacing="2">

                        <!-- Build Info -->
                        <Button Command="{Binding NavigateToSectionCommand}"
                                CommandParameter="0"
                                Classes="nav-item"
                                Background="{Binding IsBuildInfoActive, Converter={StaticResource ActiveNavBackgroundConverter}}"
                                Padding="12,10"
                                HorizontalContentAlignment="Stretch"
                                HorizontalAlignment="Stretch"
                                CornerRadius="6">
                            <Grid ColumnDefinitions="24,*,Auto">
                                <PathIcon Grid.Column="0"
                                          Data="M13 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V9L13 2ZM18 20H6V4H12V10H18V20Z"
                                          Width="16" Height="16"
                                          Foreground="{Binding IsBuildInfoActive, Converter={StaticResource ActiveNavForegroundConverter}}"/>
                                <TextBlock Grid.Column="1"
                                           Text="Build Info"
                                           FontSize="14"
                                           VerticalAlignment="Center"
                                           Margin="8,0,0,0"
                                           Foreground="{Binding IsBuildInfoActive, Converter={StaticResource ActiveNavForegroundConverter}}"/>
                                <Ellipse Grid.Column="2"
                                         Width="8" Height="8"
                                         Fill="{StaticResource GlassAppleRedBrush}"
                                         IsVisible="{Binding HasBuildInfoIssues}"
                                         VerticalAlignment="Center"/>
                            </Grid>
                        </Button>

                        <!-- Changelog -->
                        <Button Command="{Binding NavigateToSectionCommand}"
                                CommandParameter="1"
                                Classes="nav-item"
                                Background="{Binding IsChangelogActive, Converter={StaticResource ActiveNavBackgroundConverter}}"
                                Padding="12,10"
                                HorizontalContentAlignment="Stretch"
                                HorizontalAlignment="Stretch"
                                CornerRadius="6">
                            <Grid ColumnDefinitions="24,*">
                                <PathIcon Grid.Column="0"
                                          Data="M14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V8L14 2ZM16 18H8V16H16V18ZM16 14H8V12H16V14ZM13 9V3.5L18.5 9H13Z"
                                          Width="16" Height="16"
                                          Foreground="{Binding IsChangelogActive, Converter={StaticResource ActiveNavForegroundConverter}}"/>
                                <TextBlock Grid.Column="1"
                                           Text="Changelog"
                                           FontSize="14"
                                           VerticalAlignment="Center"
                                           Margin="8,0,0,0"
                                           Foreground="{Binding IsChangelogActive, Converter={StaticResource ActiveNavForegroundConverter}}"/>
                            </Grid>
                        </Button>

                        <!-- Issues -->
                        <Button Command="{Binding NavigateToSectionCommand}"
                                CommandParameter="2"
                                Classes="nav-item"
                                Background="{Binding IsIssuesActive, Converter={StaticResource ActiveNavBackgroundConverter}}"
                                Padding="12,10"
                                HorizontalContentAlignment="Stretch"
                                HorizontalAlignment="Stretch"
                                CornerRadius="6">
                            <Grid ColumnDefinitions="24,*">
                                <PathIcon Grid.Column="0"
                                          Data="M12 2C6.48 2 2 6.48 2 12S6.48 22 12 22 22 17.52 22 12 17.52 2 12 2ZM13 17H11V15H13V17ZM13 13H11V7H13V13Z"
                                          Width="16" Height="16"
                                          Foreground="{Binding IsIssuesActive, Converter={StaticResource ActiveNavForegroundConverter}}"/>
                                <TextBlock Grid.Column="1"
                                           Text="Issues"
                                           FontSize="14"
                                           VerticalAlignment="Center"
                                           Margin="8,0,0,0"
                                           Foreground="{Binding IsIssuesActive, Converter={StaticResource ActiveNavForegroundConverter}}"/>
                            </Grid>
                        </Button>

                        <!-- Release -->
                        <Button Command="{Binding NavigateToSectionCommand}"
                                CommandParameter="3"
                                Classes="nav-item"
                                Background="{Binding IsReleaseActive, Converter={StaticResource ActiveNavBackgroundConverter}}"
                                Padding="12,10"
                                HorizontalContentAlignment="Stretch"
                                HorizontalAlignment="Stretch"
                                CornerRadius="6">
                            <Grid ColumnDefinitions="24,*,Auto">
                                <PathIcon Grid.Column="0"
                                          Data="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM17.99 9L16.58 7.58L9.99 14.17L7.41 11.6L5.99 13.01L9.99 17L17.99 9Z"
                                          Width="16" Height="16"
                                          Foreground="{Binding IsReleaseActive, Converter={StaticResource ActiveNavForegroundConverter}}"/>
                                <TextBlock Grid.Column="1"
                                           Text="Release"
                                           FontSize="14"
                                           VerticalAlignment="Center"
                                           Margin="8,0,0,0"
                                           Foreground="{Binding IsReleaseActive, Converter={StaticResource ActiveNavForegroundConverter}}"/>
                                <Ellipse Grid.Column="2"
                                         Width="8" Height="8"
                                         Fill="{StaticResource GlassAppleRedBrush}"
                                         IsVisible="{Binding HasReleaseIssues}"
                                         VerticalAlignment="Center"/>
                            </Grid>
                        </Button>

                    </StackPanel>
                </Grid>
            </Border>

            <!-- Editor Area -->
            <Grid Grid.Column="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="{Binding IsPreviewVisible, Converter={StaticResource BoolToGridLengthConverter}}"/>
                </Grid.ColumnDefinitions>

                <!-- Editor Tabs -->
                <Border Grid.Column="0" Padding="16">
                    <TabControl SelectedIndex="{Binding SelectedTabIndex}">
                        <TabControl.Styles>
                            <Style Selector="TabControl /template/ ItemsPresenter">
                                <Setter Property="IsVisible" Value="False"/>
                            </Style>
                        </TabControl.Styles>

                        <!-- Build Info Tab -->
                        <TabItem Header="Build Info">
                            <ScrollViewer>
                                <StackPanel Spacing="16" Margin="0,16,0,0">
                                    <Border Background="{StaticResource GlassPanelBrush}"
                                            BorderBrush="{StaticResource GlassBorderBrush}"
                                            BorderThickness="1"
                                            CornerRadius="8"
                                            Padding="20">
                                        <Grid RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto"
                                              ColumnDefinitions="150,*,32,150,*">

                                            <TextBlock Grid.Row="0" Grid.Column="0" Text="Build Number" VerticalAlignment="Center" Foreground="{StaticResource GlassSubtleTextBrush}"/>
                                            <TextBox Grid.Row="0" Grid.Column="1" Text="{Binding SelectedBuild.BuildNumber}" Margin="0,0,0,12"/>

                                            <TextBlock Grid.Row="0" Grid.Column="3" Text="Build Date" VerticalAlignment="Center" Foreground="{StaticResource GlassSubtleTextBrush}"/>
                                            <DatePicker Grid.Row="0" Grid.Column="4" SelectedDate="{Binding SelectedBuild.BuildDate, Converter={StaticResource DateTimeToDateTimeOffsetConverter}}" Margin="0,0,0,12" HorizontalAlignment="Stretch"/>

                                            <TextBlock Grid.Row="1" Grid.Column="0" Text="Device" VerticalAlignment="Center" Foreground="{StaticResource GlassSubtleTextBrush}"/>
                                            <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding SelectedBuild.Device}" Margin="0,0,0,12"/>

                                            <TextBlock Grid.Row="1" Grid.Column="3" Text="Build Type" VerticalAlignment="Center" Foreground="{StaticResource GlassSubtleTextBrush}"/>
                                            <ComboBox Grid.Row="1" Grid.Column="4"
                                                      ItemsSource="{x:Static m:BuildProject.BuildTypeOptions}"
                                                      SelectedItem="{Binding SelectedBuild.BuildType}"
                                                      Margin="0,0,0,12"/>

                                            <TextBlock Grid.Row="2" Grid.Column="0" Text="Android Version" VerticalAlignment="Center" Foreground="{StaticResource GlassSubtleTextBrush}"/>
                                            <ComboBox Grid.Row="2" Grid.Column="1"
                                                      ItemsSource="{x:Static m:BuildProject.AndroidVersionOptions}"
                                                      SelectedItem="{Binding SelectedBuild.AndroidVersion}"
                                                      IsEditable="True"
                                                      Margin="0,0,0,12"/>

                                            <TextBlock Grid.Row="2" Grid.Column="3" Text="Security Patch" VerticalAlignment="Center" Foreground="{StaticResource GlassSubtleTextBrush}"/>
                                            <DatePicker Grid.Row="2" Grid.Column="4"
                                                        SelectedDate="{Binding SelectedBuild.SecurityPatchDate, Converter={StaticResource DateTimeToDateTimeOffsetConverter}}"
                                                        Margin="0,0,0,12"
                                                        HorizontalAlignment="Stretch"/>

                                            <TextBlock Grid.Row="3" Grid.Column="0" Text="Kernel Version" VerticalAlignment="Center" Foreground="{StaticResource GlassSubtleTextBrush}"/>
                                            <ComboBox Grid.Row="3" Grid.Column="1"
                                                      ItemsSource="{x:Static m:BuildProject.KernelVersionOptions}"
                                                      SelectedItem="{Binding SelectedBuild.KernelVersion}"
                                                      IsEditable="True"
                                                      Margin="0,0,0,12"/>

                                            <TextBlock Grid.Row="3" Grid.Column="3" Text="Previous Build" VerticalAlignment="Center" Foreground="{StaticResource GlassSubtleTextBrush}"/>
                                            <TextBox Grid.Row="3" Grid.Column="4" Text="{Binding SelectedBuild.PreviousBuild}" Margin="0,0,0,12"/>

                                            <!-- Validation Warnings -->
                                            <StackPanel Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="5" Margin="0,8,0,0">
                                                <TextBlock Text="* Required: Build Number is empty"
                                                           Foreground="{StaticResource GlassErrorColor}"
                                                           FontSize="11"
                                                           IsVisible="{Binding SelectedBuild.IsBuildNumberInvalid}"
                                                           Margin="0,2"/>
                                                <TextBlock Text="* Required: Device is empty or TBD"
                                                           Foreground="{StaticResource GlassErrorColor}"
                                                           FontSize="11"
                                                           IsVisible="{Binding SelectedBuild.IsDeviceInvalid}"
                                                           Margin="0,2"/>
                                                <TextBlock Text="* Required: Android Version must be selected"
                                                           Foreground="{StaticResource GlassErrorColor}"
                                                           FontSize="11"
                                                           IsVisible="{Binding SelectedBuild.IsAndroidVersionInvalid}"
                                                           Margin="0,2"/>
                                                <TextBlock Text="* Required: Build Type must be selected"
                                                           Foreground="{StaticResource GlassErrorColor}"
                                                           FontSize="11"
                                                           IsVisible="{Binding SelectedBuild.IsBuildTypeInvalid}"
                                                           Margin="0,2"/>
                                            </StackPanel>
                                        </Grid>
                                    </Border>

                                    <!-- Files Section -->
                                    <Border Background="{StaticResource GlassPanelBrush}"
                                            BorderBrush="{StaticResource GlassBorderBrush}"
                                            BorderThickness="1"
                                            CornerRadius="8"
                                            Padding="20">
                                        <StackPanel>
                                            <Grid ColumnDefinitions="*,Auto">
                                                <TextBlock Grid.Column="0" Text="Files" FontSize="16" FontWeight="SemiBold" Margin="0,0,0,12"/>
                                                <Button Grid.Column="1" Command="{Binding ComputeChecksumsCommand}" Content="Compute SHA256" Margin="0,0,0,12" Padding="12,6"/>
                                            </Grid>
                                            <DataGrid ItemsSource="{Binding SelectedBuild.Files}"
                                                      AutoGenerateColumns="False"
                                                      CanUserReorderColumns="False"
                                                      CanUserResizeColumns="True"
                                                      GridLinesVisibility="Horizontal"
                                                      BorderThickness="1"
                                                      BorderBrush="{StaticResource GlassBorderBrush}"
                                                      CornerRadius="4"
                                                      IsReadOnly="True">
                                                <DataGrid.Columns>
                                                    <DataGridTextColumn Header="File Name" Binding="{Binding FileName}" Width="2*"/>
                                                    <DataGridTextColumn Header="Size" Binding="{Binding FileSize}" Width="*"/>
                                                    <DataGridTextColumn Header="SHA256" Binding="{Binding Sha256}" Width="4*"/>
                                                </DataGrid.Columns>
                                            </DataGrid>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </ScrollViewer>
                        </TabItem>

                        <!-- Changelog Tab -->
                        <TabItem Header="Changelog">
                            <ScrollViewer>
                                <StackPanel Spacing="16" Margin="0,16,0,0">
                                    <!-- App Updates -->
                                    <Border Background="{StaticResource GlassPanelBrush}"
                                            BorderBrush="{StaticResource GlassBorderBrush}"
                                            BorderThickness="1"
                                            CornerRadius="8"
                                            Padding="20">
                                        <StackPanel>
                                            <Grid ColumnDefinitions="*,Auto">
                                                <TextBlock Grid.Column="0" Text="App Updates" FontSize="16" FontWeight="SemiBold" Margin="0,0,0,12"/>
                                                <Button Grid.Column="1" Command="{Binding AddAppUpdateCommand}" Content="+ Add App" Margin="0,0,0,12" Padding="12,6"
                                                        Classes="btn-blue" Background="{StaticResource GlassAppleBlueBrush}" Foreground="White"/>
                                            </Grid>
                                            <DataGrid ItemsSource="{Binding SelectedBuild.AppUpdates}"
                                                      AutoGenerateColumns="False"
                                                      CanUserReorderColumns="False"
                                                      CanUserResizeColumns="True"
                                                      GridLinesVisibility="Horizontal"
                                                      BorderThickness="1"
                                                      BorderBrush="{StaticResource GlassBorderBrush}"
                                                      CornerRadius="4"
                                                      MaxHeight="250">
                                                <DataGrid.Columns>
                                                    <DataGridTextColumn Header="App Name" Binding="{Binding AppName}" Width="150"/>
                                                    <DataGridTextColumn Header="Path" Binding="{Binding Path}" Width="*"/>
                                                    <DataGridTextColumn Header="Version" Binding="{Binding Version}" Width="80"/>
                                                    <DataGridTextColumn Header="Changes" Binding="{Binding Changes}" Width="*"/>
                                                    <DataGridTextColumn Header="Description" Binding="{Binding Description}" Width="*"/>
                                                    <DataGridTemplateColumn Header="" Width="40">
                                                        <DataGridTemplateColumn.CellTemplate>
                                                            <DataTemplate>
                                                                <Button Command="{Binding $parent[DataGrid].((vm:MainWindowViewModel)DataContext).RemoveAppUpdateCommand}"
                                                                        CommandParameter="{Binding}"
                                                                        Padding="4"
                                                                        Background="Transparent"
                                                                        ToolTip.Tip="Delete">
                                                                    <PathIcon Data="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"
                                                                              Width="14" Height="14"
                                                                              Foreground="{StaticResource GlassErrorColor}"/>
                                                                </Button>
                                                            </DataTemplate>
                                                        </DataGridTemplateColumn.CellTemplate>
                                                    </DataGridTemplateColumn>
                                                </DataGrid.Columns>
                                            </DataGrid>
                                        </StackPanel>
                                    </Border>

                                    <!-- System Modifications -->
                                    <Border Background="{StaticResource GlassPanelBrush}"
                                            BorderBrush="{StaticResource GlassBorderBrush}"
                                            BorderThickness="1"
                                            CornerRadius="8"
                                            Padding="20">
                                        <StackPanel>
                                            <Grid ColumnDefinitions="*,Auto">
                                                <TextBlock Grid.Column="0" Text="System Modifications" FontSize="16" FontWeight="SemiBold"/>
                                                <Button Grid.Column="1" Command="{Binding ToggleSystemModificationsCommand}"
                                                        Padding="8,4" Classes="btn-blue" Background="{StaticResource GlassAppleBlueBrush}" Foreground="White"
                                                        IsVisible="{Binding !IsSystemModificationsExpanded}">
                                                    <PathIcon Data="M19 13H13V19H11V13H5V11H11V5H13V11H19V13Z" Width="14" Height="14" Foreground="White"/>
                                                </Button>
                                                <Button Grid.Column="1" Command="{Binding ToggleSystemModificationsCommand}"
                                                        Padding="8,4" Classes="btn-red" Background="{StaticResource GlassAppleRedBrush}" Foreground="White"
                                                        IsVisible="{Binding IsSystemModificationsExpanded}">
                                                    <PathIcon Data="M19 13H5V11H19V13Z" Width="14" Height="14" Foreground="White"/>
                                                </Button>
                                            </Grid>
                                            <StackPanel IsVisible="{Binding IsSystemModificationsExpanded}" Margin="0,8,0,0">
                                                <TextBlock Text="Enter each modification on a new line" FontSize="12" Foreground="{StaticResource GlassSubtleTextBrush}" Margin="0,0,0,8"/>
                                                <TextBox Text="{Binding SelectedBuild.SystemModifications}"
                                                         AcceptsReturn="True" TextWrapping="Wrap" Height="100"/>
                                            </StackPanel>
                                        </StackPanel>
                                    </Border>

                                    <!-- Kernel/Driver Changes -->
                                    <Border Background="{StaticResource GlassPanelBrush}"
                                            BorderBrush="{StaticResource GlassBorderBrush}"
                                            BorderThickness="1"
                                            CornerRadius="8"
                                            Padding="20">
                                        <StackPanel>
                                            <Grid ColumnDefinitions="*,Auto">
                                                <TextBlock Grid.Column="0" Text="Kernel/Driver Changes" FontSize="16" FontWeight="SemiBold"/>
                                                <Button Grid.Column="1" Command="{Binding ToggleKernelChangesCommand}"
                                                        Padding="8,4" Classes="btn-blue" Background="{StaticResource GlassAppleBlueBrush}" Foreground="White"
                                                        IsVisible="{Binding !IsKernelChangesExpanded}">
                                                    <PathIcon Data="M19 13H13V19H11V13H5V11H11V5H13V11H19V13Z" Width="14" Height="14" Foreground="White"/>
                                                </Button>
                                                <Button Grid.Column="1" Command="{Binding ToggleKernelChangesCommand}"
                                                        Padding="8,4" Classes="btn-red" Background="{StaticResource GlassAppleRedBrush}" Foreground="White"
                                                        IsVisible="{Binding IsKernelChangesExpanded}">
                                                    <PathIcon Data="M19 13H5V11H19V13Z" Width="14" Height="14" Foreground="White"/>
                                                </Button>
                                            </Grid>
                                            <StackPanel IsVisible="{Binding IsKernelChangesExpanded}" Margin="0,8,0,0">
                                                <TextBlock Text="Enter each change on a new line" FontSize="12" Foreground="{StaticResource GlassSubtleTextBrush}" Margin="0,0,0,8"/>
                                                <TextBox Text="{Binding SelectedBuild.KernelDriverChanges}"
                                                         AcceptsReturn="True" TextWrapping="Wrap" Height="100"/>
                                            </StackPanel>
                                        </StackPanel>
                                    </Border>

                                    <!-- Configuration Changes -->
                                    <Border Background="{StaticResource GlassPanelBrush}"
                                            BorderBrush="{StaticResource GlassBorderBrush}"
                                            BorderThickness="1"
                                            CornerRadius="8"
                                            Padding="20">
                                        <StackPanel>
                                            <Grid ColumnDefinitions="*,Auto">
                                                <TextBlock Grid.Column="0" Text="Configuration Changes" FontSize="16" FontWeight="SemiBold"/>
                                                <Button Grid.Column="1" Command="{Binding ToggleConfigChangesCommand}"
                                                        Padding="8,4" Classes="btn-blue" Background="{StaticResource GlassAppleBlueBrush}" Foreground="White"
                                                        IsVisible="{Binding !IsConfigChangesExpanded}">
                                                    <PathIcon Data="M19 13H13V19H11V13H5V11H11V5H13V11H19V13Z" Width="14" Height="14" Foreground="White"/>
                                                </Button>
                                                <Button Grid.Column="1" Command="{Binding ToggleConfigChangesCommand}"
                                                        Padding="8,4" Classes="btn-red" Background="{StaticResource GlassAppleRedBrush}" Foreground="White"
                                                        IsVisible="{Binding IsConfigChangesExpanded}">
                                                    <PathIcon Data="M19 13H5V11H19V13Z" Width="14" Height="14" Foreground="White"/>
                                                </Button>
                                            </Grid>
                                            <StackPanel IsVisible="{Binding IsConfigChangesExpanded}" Margin="0,8,0,0">
                                                <TextBlock Text="Enter each change on a new line" FontSize="12" Foreground="{StaticResource GlassSubtleTextBrush}" Margin="0,0,0,8"/>
                                                <TextBox Text="{Binding SelectedBuild.ConfigurationChanges}"
                                                         AcceptsReturn="True" TextWrapping="Wrap" Height="100"/>
                                            </StackPanel>
                                        </StackPanel>
                                    </Border>

                                    <!-- Removed Components -->
                                    <Border Background="{StaticResource GlassPanelBrush}"
                                            BorderBrush="{StaticResource GlassBorderBrush}"
                                            BorderThickness="1"
                                            CornerRadius="8"
                                            Padding="20">
                                        <StackPanel>
                                            <Grid ColumnDefinitions="*,Auto">
                                                <TextBlock Grid.Column="0" Text="Removed Components" FontSize="16" FontWeight="SemiBold"/>
                                                <Button Grid.Column="1" Command="{Binding ToggleRemovedComponentsCommand}"
                                                        Padding="8,4" Classes="btn-blue" Background="{StaticResource GlassAppleBlueBrush}" Foreground="White"
                                                        IsVisible="{Binding !IsRemovedComponentsExpanded}">
                                                    <PathIcon Data="M19 13H13V19H11V13H5V11H11V5H13V11H19V13Z" Width="14" Height="14" Foreground="White"/>
                                                </Button>
                                                <Button Grid.Column="1" Command="{Binding ToggleRemovedComponentsCommand}"
                                                        Padding="8,4" Classes="btn-red" Background="{StaticResource GlassAppleRedBrush}" Foreground="White"
                                                        IsVisible="{Binding IsRemovedComponentsExpanded}">
                                                    <PathIcon Data="M19 13H5V11H19V13Z" Width="14" Height="14" Foreground="White"/>
                                                </Button>
                                            </Grid>
                                            <StackPanel IsVisible="{Binding IsRemovedComponentsExpanded}" Margin="0,8,0,0">
                                                <TextBlock Text="Enter each component on a new line" FontSize="12" Foreground="{StaticResource GlassSubtleTextBrush}" Margin="0,0,0,8"/>
                                                <TextBox Text="{Binding SelectedBuild.RemovedComponents}"
                                                         AcceptsReturn="True" TextWrapping="Wrap" Height="100"/>
                                            </StackPanel>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </ScrollViewer>
                        </TabItem>

                        <!-- Known Issues Tab -->
                        <TabItem Header="Issues">
                            <ScrollViewer>
                                <Border Background="{StaticResource GlassPanelBrush}"
                                        BorderBrush="{StaticResource GlassBorderBrush}"
                                        BorderThickness="1"
                                        CornerRadius="8"
                                        Padding="20"
                                        Margin="0,16,0,0">
                                    <StackPanel>
                                        <Grid ColumnDefinitions="*,Auto">
                                            <TextBlock Grid.Column="0" Text="Known Issues" FontSize="16" FontWeight="SemiBold" Margin="0,0,0,12"/>
                                            <Button Grid.Column="1" Command="{Binding AddKnownIssueCommand}" Content="+ Add Issue" Margin="0,0,0,12" Padding="12,6"
                                                    Classes="btn-blue" Background="{StaticResource GlassAppleBlueBrush}" Foreground="White"/>
                                        </Grid>
                                        <DataGrid ItemsSource="{Binding SelectedBuild.KnownIssues}"
                                                  AutoGenerateColumns="False"
                                                  CanUserReorderColumns="False"
                                                  CanUserResizeColumns="True"
                                                  GridLinesVisibility="Horizontal"
                                                  BorderThickness="1"
                                                  BorderBrush="{StaticResource GlassBorderBrush}"
                                                  CornerRadius="4">
                                            <DataGrid.Columns>
                                                <DataGridTextColumn Header="Issue" Binding="{Binding Issue}" Width="*"/>
                                                <DataGridTemplateColumn Header="Severity" Width="100">
                                                    <DataGridTemplateColumn.CellTemplate>
                                                        <DataTemplate>
                                                            <ComboBox SelectedItem="{Binding Severity}" ItemsSource="{x:Static m:KnownIssue.SeverityOptions}"/>
                                                        </DataTemplate>
                                                    </DataGridTemplateColumn.CellTemplate>
                                                </DataGridTemplateColumn>
                                                <DataGridTemplateColumn Header="Status" Width="100">
                                                    <DataGridTemplateColumn.CellTemplate>
                                                        <DataTemplate>
                                                            <ComboBox SelectedItem="{Binding Status}" ItemsSource="{x:Static m:KnownIssue.StatusOptions}"/>
                                                        </DataTemplate>
                                                    </DataGridTemplateColumn.CellTemplate>
                                                </DataGridTemplateColumn>
                                                <DataGridTextColumn Header="Workaround" Binding="{Binding Workaround}" Width="*"/>
                                                <DataGridTemplateColumn Header="" Width="40">
                                                    <DataGridTemplateColumn.CellTemplate>
                                                        <DataTemplate>
                                                            <Button Command="{Binding $parent[DataGrid].((vm:MainWindowViewModel)DataContext).RemoveKnownIssueCommand}"
                                                                    CommandParameter="{Binding}"
                                                                    Padding="4"
                                                                    Background="Transparent"
                                                                    ToolTip.Tip="Delete">
                                                                <PathIcon Data="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"
                                                                          Width="14" Height="14"
                                                                          Foreground="{StaticResource GlassErrorColor}"/>
                                                            </Button>
                                                        </DataTemplate>
                                                    </DataGridTemplateColumn.CellTemplate>
                                                </DataGridTemplateColumn>
                                            </DataGrid.Columns>
                                        </DataGrid>
                                    </StackPanel>
                                </Border>
                            </ScrollViewer>
                        </TabItem>

                        <!-- Release Tab -->
                        <TabItem Header="Release">
                            <ScrollViewer>
                                <StackPanel Spacing="16" Margin="0,16,0,0">
                                    <!-- Dependencies -->
                                    <Border Background="{StaticResource GlassPanelBrush}"
                                            BorderBrush="{StaticResource GlassBorderBrush}"
                                            BorderThickness="1"
                                            CornerRadius="8"
                                            Padding="20">
                                        <StackPanel>
                                            <TextBlock Text="Dependencies" FontSize="16" FontWeight="SemiBold" Margin="0,0,0,12"/>
                                            <Grid RowDefinitions="Auto,Auto" ColumnDefinitions="150,*">
                                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Bootloader Version" VerticalAlignment="Center" Foreground="{StaticResource GlassSubtleTextBrush}"/>
                                                <TextBox Grid.Row="0" Grid.Column="1" Text="{Binding SelectedBuild.BootloaderVersion}" Margin="0,0,0,12"/>

                                                <TextBlock Grid.Row="1" Grid.Column="0" Text="Compatible OTA" VerticalAlignment="Center" Foreground="{StaticResource GlassSubtleTextBrush}"/>
                                                <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding SelectedBuild.CompatibleOtaBuilds}"/>
                                            </Grid>
                                        </StackPanel>
                                    </Border>

                                    <!-- Recommended For -->
                                    <Border Background="{StaticResource GlassPanelBrush}"
                                            BorderBrush="{StaticResource GlassBorderBrush}"
                                            BorderThickness="1"
                                            CornerRadius="8"
                                            Padding="20">
                                        <StackPanel>
                                            <TextBlock Text="Recommended For" FontSize="16" FontWeight="SemiBold" Margin="0,0,0,12"/>
                                            <CheckBox IsChecked="{Binding SelectedBuild.InternalTesting}" Margin="0,0,0,8">
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="&#x2713; " Foreground="{StaticResource GlassSuccessBrush}"
                                                               IsVisible="{Binding SelectedBuild.InternalTesting}"/>
                                                    <TextBlock Text="&#x2717; " Foreground="{StaticResource GlassErrorColor}"
                                                               IsVisible="{Binding !SelectedBuild.InternalTesting}"/>
                                                    <TextBlock Text="Internal Testing"/>
                                                </StackPanel>
                                            </CheckBox>
                                            <CheckBox IsChecked="{Binding SelectedBuild.CustomerRelease}" Margin="0,0,0,12">
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="&#x2713; " Foreground="{StaticResource GlassSuccessBrush}"
                                                               IsVisible="{Binding SelectedBuild.CustomerRelease}"/>
                                                    <TextBlock Text="&#x2717; " Foreground="{StaticResource GlassErrorColor}"
                                                               IsVisible="{Binding !SelectedBuild.CustomerRelease}"/>
                                                    <TextBlock Text="Customer Release"/>
                                                </StackPanel>
                                            </CheckBox>
                                            <TextBlock Text="* Required: At least one option must be selected"
                                                       Foreground="{StaticResource GlassErrorColor}"
                                                       FontSize="11"
                                                       IsVisible="{Binding SelectedBuild.IsRecommendedForInvalid}"
                                                       Margin="0,0,0,12"/>
                                            <StackPanel Margin="0,4,0,0">
                                                <ToggleButton IsChecked="{Binding IsSpecificCustomerEnabled}"
                                                              Padding="12,6"
                                                              Background="{Binding IsSpecificCustomerEnabled, Converter={StaticResource BoolToBrushConverter}}"
                                                              Foreground="{Binding IsSpecificCustomerEnabled, Converter={StaticResource BoolToForegroundConverter}}">
                                                    <StackPanel Orientation="Horizontal" Spacing="6">
                                                        <PathIcon Data="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"
                                                                  Width="14" Height="14"/>
                                                        <TextBlock Text="Specific Customer" VerticalAlignment="Center"/>
                                                    </StackPanel>
                                                </ToggleButton>
                                                <TextBox Text="{Binding SelectedBuild.SpecificCustomer}"
                                                         IsVisible="{Binding IsSpecificCustomerEnabled}"
                                                         Watermark="Enter customer name..."
                                                         Margin="0,8,0,0"/>
                                            </StackPanel>
                                        </StackPanel>
                                    </Border>

                                    <!-- Customer Release Notes -->
                                    <Border Background="{StaticResource GlassPanelBrush}"
                                            BorderBrush="{StaticResource GlassBorderBrush}"
                                            BorderThickness="1"
                                            CornerRadius="8"
                                            Padding="20">
                                        <StackPanel>
                                            <TextBlock Text="Customer Release Notes" FontSize="16" FontWeight="SemiBold" Margin="0,0,0,8"/>
                                            <TextBox Text="{Binding SelectedBuild.CustomerReleaseNotes}"
                                                     AcceptsReturn="True"
                                                     TextWrapping="Wrap"
                                                     Height="150"/>
                                        </StackPanel>
                                    </Border>

                                    <!-- Build Engineer -->
                                    <Border Background="{StaticResource GlassPanelBrush}"
                                            BorderBrush="{StaticResource GlassBorderBrush}"
                                            BorderThickness="1"
                                            CornerRadius="8"
                                            Padding="20">
                                        <StackPanel>
                                            <TextBlock Text="Build Engineer" FontSize="16" FontWeight="SemiBold" Margin="0,0,0,12"/>
                                            <Grid RowDefinitions="Auto,Auto,Auto,Auto" ColumnDefinitions="150,*">
                                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Built by" VerticalAlignment="Center" Foreground="{StaticResource GlassSubtleTextBrush}"/>
                                                <AutoCompleteBox Grid.Row="0" Grid.Column="1"
                                                                   Text="{Binding SelectedBuild.BuiltBy}"
                                                                   ItemsSource="{Binding BuiltByHistory}"
                                                                   FilterMode="Contains"
                                                                   Watermark="Type engineer name..."
                                                                   Margin="0,0,0,12"/>

                                                <TextBlock Grid.Row="1" Grid.Column="0" Text="Reviewed by" VerticalAlignment="Center" Foreground="{StaticResource GlassSubtleTextBrush}"/>
                                                <AutoCompleteBox Grid.Row="1" Grid.Column="1"
                                                                   Text="{Binding SelectedBuild.ReviewedBy}"
                                                                   ItemsSource="{Binding ReviewedByHistory}"
                                                                   FilterMode="Contains"
                                                                   Watermark="Type reviewer name..."
                                                                   Margin="0,0,0,12"/>

                                                <TextBlock Grid.Row="2" Grid.Column="0" Text="Approved Date" VerticalAlignment="Center" Foreground="{StaticResource GlassSubtleTextBrush}"/>
                                                <DatePicker Grid.Row="2" Grid.Column="1" SelectedDate="{Binding SelectedBuild.ApprovedForReleaseDate, Converter={StaticResource DateTimeToDateTimeOffsetConverter}}" Margin="0,0,0,12" HorizontalAlignment="Stretch"/>

                                                <!-- Validation Warnings -->
                                                <StackPanel Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="2">
                                                    <TextBlock Text="* Required: Built by is empty"
                                                               Foreground="{StaticResource GlassErrorColor}"
                                                               FontSize="11"
                                                               IsVisible="{Binding SelectedBuild.IsBuiltByInvalid}"
                                                               Margin="0,2"/>
                                                    <TextBlock Text="* Required: Reviewed by is empty"
                                                               Foreground="{StaticResource GlassErrorColor}"
                                                               FontSize="11"
                                                               IsVisible="{Binding SelectedBuild.IsReviewedByInvalid}"
                                                               Margin="0,2"/>
                                                    <TextBlock Text="* Required: Approved Date must be selected"
                                                               Foreground="{StaticResource GlassErrorColor}"
                                                               FontSize="11"
                                                               IsVisible="{Binding SelectedBuild.IsApprovedDateInvalid}"
                                                               Margin="0,2"/>
                                                </StackPanel>
                                            </Grid>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </ScrollViewer>
                        </TabItem>
                    </TabControl>
                </Border>

                <!-- Preview Panel -->
                <Border Grid.Column="1"
                        IsVisible="{Binding IsPreviewVisible}"
                        Background="{StaticResource GlassPanelBrush}"
                        BorderBrush="{StaticResource GlassBorderBrush}"
                        BorderThickness="1,0,0,0">
                    <Grid RowDefinitions="Auto,*">
                        <Border Grid.Row="0"
                                Background="{StaticResource GlassBackgroundBrush}"
                                Padding="16,12">
                            <Grid ColumnDefinitions="*,Auto">
                                <TextBlock Grid.Column="0" Text="Markdown Preview" FontWeight="SemiBold"/>
                                <Button Grid.Column="1" Command="{Binding UpdatePreviewCommand}" Content="Refresh" Padding="8,4"/>
                            </Grid>
                        </Border>
                        <ScrollViewer Grid.Row="1" Padding="16" Background="#F5F5F5">
                            <Border Padding="32,40" Background="White" Margin="8" CornerRadius="4"
                                    BoxShadow="0 2 12 0 #20000000">
                                <md:MarkdownScrollViewer Markdown="{Binding PreviewContent}"
                                                         SaveScrollValueWhenContentUpdated="True"/>
                            </Border>
                        </ScrollViewer>
                    </Grid>
                </Border>
            </Grid>
        </Grid>

        <!-- Status Bar -->
        <Border Grid.Row="2"
                Background="{StaticResource GlassPanelTranslucentBrush}"
                BorderBrush="{StaticResource GlassBorderBrush}"
                BorderThickness="0,1,0,0"
                Padding="16,8">
            <Grid ColumnDefinitions="Auto,*,Auto">
                <ProgressBar Grid.Column="0"
                             IsIndeterminate="{Binding IsBusy}"
                             IsVisible="{Binding IsBusy}"
                             Width="100"
                             Margin="0,0,16,0"/>
                <TextBlock Grid.Column="1"
                           Text="{Binding StatusMessage}"
                           VerticalAlignment="Center"/>
                <TextBlock Grid.Column="2"
                           Text="{Binding SelectedBuild.LastUpdated, StringFormat='Last updated: {0:yyyy-MM-dd HH:mm}'}"
                           Foreground="{StaticResource GlassSubtleTextBrush}"
                           VerticalAlignment="Center"
                           IsVisible="{Binding HasWorkspaceLoaded}"/>
            </Grid>
        </Border>
    </Grid>

    <!-- Loading Overlay (Apple-style) -->
    <Border IsVisible="{Binding IsBusy}"
            Background="#80000000"
            ZIndex="1000">
        <Border HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Background="White"
                CornerRadius="16"
                Padding="40,32"
                BoxShadow="0 8 32 0 #40000000">
            <StackPanel Spacing="20" HorizontalAlignment="Center">
                <!-- Circular Spinner using Arc Path -->
                <Canvas Width="48" Height="48" HorizontalAlignment="Center">
                    <Path Canvas.Left="0" Canvas.Top="0"
                          Stroke="{StaticResource GlassBorderBrush}"
                          StrokeThickness="4"
                          Data="M 24,4 A 20,20 0 1 1 23.99,4"/>
                    <Path Canvas.Left="0" Canvas.Top="0"
                          Name="SpinnerArc"
                          Stroke="{StaticResource GlassAppleBlueBrush}"
                          StrokeThickness="4"
                          StrokeLineCap="Round"
                          Data="M 24,4 A 20,20 0 0 1 44,24"
                          RenderTransformOrigin="24,24">
                        <Path.Styles>
                            <Style Selector="Path#SpinnerArc">
                                <Style.Animations>
                                    <Animation Duration="0:0:1" IterationCount="Infinite">
                                        <KeyFrame Cue="0%">
                                            <Setter Property="RotateTransform.Angle" Value="0"/>
                                        </KeyFrame>
                                        <KeyFrame Cue="100%">
                                            <Setter Property="RotateTransform.Angle" Value="360"/>
                                        </KeyFrame>
                                    </Animation>
                                </Style.Animations>
                            </Style>
                        </Path.Styles>
                        <Path.RenderTransform>
                            <RotateTransform Angle="0"/>
                        </Path.RenderTransform>
                    </Path>
                </Canvas>
                <!-- Loading Message -->
                <TextBlock Text="{Binding BusyMessage}"
                           FontSize="15"
                           FontWeight="Medium"
                           Foreground="{StaticResource GlassTextBrush}"
                           HorizontalAlignment="Center"/>
            </StackPanel>
        </Border>
    </Border>
    </Panel>
</Window>
