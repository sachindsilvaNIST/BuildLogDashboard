<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Class="BuildLogDashboard.Views.AppUpdateDialog"
        Title="App Update"
        Width="460"
        SizeToContent="Height"
        WindowStartupLocation="CenterOwner"
        CanResize="False"
        ShowInTaskbar="False"
        Background="#F5F5F7"
        ExtendClientAreaToDecorationsHint="True"
        ExtendClientAreaChromeHints="NoChrome"
        SystemDecorations="BorderOnly">

    <Window.Styles>
        <!-- Confirm button hover animation -->
        <Style Selector="Button.btn-confirm /template/ ContentPresenter">
            <Setter Property="Transitions">
                <Transitions>
                    <BrushTransition Property="Background" Duration="0:0:0.15"/>
                </Transitions>
            </Setter>
        </Style>
        <Style Selector="Button.btn-confirm /template/ ContentPresenter">
            <Setter Property="Background" Value="#107C10"/>
        </Style>
        <Style Selector="Button.btn-confirm:pointerover /template/ ContentPresenter">
            <Setter Property="Background" Value="#0b5c0b"/>
        </Style>

        <!-- Cancel button hover animation -->
        <Style Selector="Button.btn-cancel /template/ ContentPresenter">
            <Setter Property="Transitions">
                <Transitions>
                    <BrushTransition Property="Background" Duration="0:0:0.15"/>
                </Transitions>
            </Setter>
        </Style>
        <Style Selector="Button.btn-cancel /template/ ContentPresenter">
            <Setter Property="Background" Value="#D13438"/>
        </Style>
        <Style Selector="Button.btn-cancel:pointerover /template/ ContentPresenter">
            <Setter Property="Background" Value="#a02528"/>
        </Style>
    </Window.Styles>

    <Border CornerRadius="12"
            Background="#FFFFFF"
            BorderBrush="#E0E0E0"
            BorderThickness="1">
        <Grid RowDefinitions="Auto,Auto,Auto">
            <!-- Title -->
            <Border Grid.Row="0"
                    Background="#FAFAFA"
                    CornerRadius="12,12,0,0"
                    Padding="24,18">
                <TextBlock x:Name="TitleText"
                           Text="Add App Update"
                           FontSize="17"
                           FontWeight="SemiBold"
                           Foreground="#1A1A1A"/>
            </Border>

            <!-- Fields -->
            <StackPanel Grid.Row="1" Spacing="14" Margin="24,20,24,8">
                <StackPanel Spacing="4">
                    <TextBlock Text="App Name" FontSize="13" FontWeight="Medium" Foreground="#666666"/>
                    <TextBox x:Name="AppNameBox" Watermark="e.g. Settings" Padding="10,8" CornerRadius="6"/>
                </StackPanel>
                <StackPanel Spacing="4">
                    <TextBlock Text="Path" FontSize="13" FontWeight="Medium" Foreground="#666666"/>
                    <TextBox x:Name="PathBox" Watermark="e.g. packages/apps/Settings" Padding="10,8" CornerRadius="6"/>
                </StackPanel>
                <StackPanel Spacing="4">
                    <TextBlock Text="Version" FontSize="13" FontWeight="Medium" Foreground="#666666"/>
                    <TextBox x:Name="VersionBox" Watermark="e.g. 1.0.0" Padding="10,8" CornerRadius="6"/>
                </StackPanel>
                <StackPanel Spacing="4">
                    <TextBlock Text="Changes" FontSize="13" FontWeight="Medium" Foreground="#666666"/>
                    <TextBox x:Name="ChangesBox" Watermark="Describe the changes..."
                             AcceptsReturn="True" TextWrapping="Wrap" Height="80"
                             Padding="10,8" CornerRadius="6"/>
                </StackPanel>
            </StackPanel>

            <!-- Loading Spinner Overlay -->
            <Border Grid.Row="1"
                    x:Name="SpinnerOverlay"
                    IsVisible="False"
                    Background="#CCFFFFFF"
                    CornerRadius="0"
                    ZIndex="10">
                <StackPanel Spacing="14" HorizontalAlignment="Center" VerticalAlignment="Center">
                    <Canvas Width="36" Height="36" HorizontalAlignment="Center">
                        <Path Canvas.Left="0" Canvas.Top="0"
                              Stroke="#E0E0E0"
                              StrokeThickness="3"
                              Data="M 18,3 A 15,15 0 1 1 17.99,3"/>
                        <Path Canvas.Left="0" Canvas.Top="0"
                              Name="DialogSpinnerArc"
                              Stroke="#007AFF"
                              StrokeThickness="3"
                              StrokeLineCap="Round"
                              Data="M 18,3 A 15,15 0 0 1 33,18"
                              RenderTransformOrigin="18,18">
                            <Path.Styles>
                                <Style Selector="Path#DialogSpinnerArc">
                                    <Style.Animations>
                                        <Animation Duration="0:0:1" IterationCount="Infinite">
                                            <KeyFrame Cue="0%">
                                                <Setter Property="RotateTransform.Angle" Value="0"/>
                                            </KeyFrame>
                                            <KeyFrame Cue="100%">
                                                <Setter Property="RotateTransform.Angle" Value="360"/>
                                            </KeyFrame>
                                        </Animation>
                                    </Style.Animations>
                                </Style>
                            </Path.Styles>
                            <Path.RenderTransform>
                                <RotateTransform Angle="0"/>
                            </Path.RenderTransform>
                        </Path>
                    </Canvas>
                    <TextBlock x:Name="SpinnerText"
                               Text="Adding App..."
                               FontSize="14"
                               FontWeight="Medium"
                               Foreground="#1A1A1A"
                               HorizontalAlignment="Center"/>
                </StackPanel>
            </Border>

            <!-- Footer Buttons -->
            <Border Grid.Row="2"
                    Background="#FAFAFA"
                    BorderBrush="#E0E0E0"
                    BorderThickness="0,1,0,0"
                    CornerRadius="0,0,12,12"
                    Padding="24,16">
                <Grid ColumnDefinitions="*,Auto,Auto">
                    <Button Grid.Column="1"
                            x:Name="CancelButton"
                            Content="Cancel"
                            Padding="24,10"
                            Margin="0,0,12,0"
                            Classes="btn-cancel"
                            Background="#D13438"
                            Foreground="White"
                            CornerRadius="6"
                            Click="OnCancelClick"/>
                    <Button Grid.Column="2"
                            x:Name="ConfirmButton"
                            Content="Confirm"
                            Padding="24,10"
                            Classes="btn-confirm"
                            Background="#107C10"
                            Foreground="White"
                            CornerRadius="6"
                            Click="OnConfirmClick"/>
                </Grid>
            </Border>
        </Grid>
    </Border>
</Window>
