<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Class="BuildLogDashboard.Views.ExportPreviewWindow"
        Title="Export Preview"
        Width="900" Height="800"
        WindowStartupLocation="CenterOwner"
        CanResize="True"
        MinWidth="700" MinHeight="550"
        Background="#F5F5F7">

    <Window.Styles>
        <!-- Button hover animations for Browse button -->
        <Style Selector="Button.btn-blue /template/ ContentPresenter">
            <Setter Property="Transitions">
                <Transitions>
                    <BrushTransition Property="Background" Duration="0:0:0.15"/>
                </Transitions>
            </Setter>
        </Style>
        <Style Selector="Button.btn-blue /template/ ContentPresenter">
            <Setter Property="Background" Value="#007AFF"/>
        </Style>
        <Style Selector="Button.btn-blue:pointerover /template/ ContentPresenter">
            <Setter Property="Background" Value="#0056b3"/>
        </Style>

        <!-- Button hover animations for Confirm button -->
        <Style Selector="Button.btn-confirm /template/ ContentPresenter">
            <Setter Property="Transitions">
                <Transitions>
                    <BrushTransition Property="Background" Duration="0:0:0.15"/>
                </Transitions>
            </Setter>
        </Style>
        <Style Selector="Button.btn-confirm /template/ ContentPresenter">
            <Setter Property="Background" Value="#107C10"/>
        </Style>
        <Style Selector="Button.btn-confirm:pointerover /template/ ContentPresenter">
            <Setter Property="Background" Value="#0b5c0b"/>
        </Style>

        <!-- Button hover animations for Cancel button -->
        <Style Selector="Button.btn-cancel /template/ ContentPresenter">
            <Setter Property="Transitions">
                <Transitions>
                    <BrushTransition Property="Background" Duration="0:0:0.15"/>
                </Transitions>
            </Setter>
        </Style>
        <Style Selector="Button.btn-cancel /template/ ContentPresenter">
            <Setter Property="Background" Value="#D13438"/>
        </Style>
        <Style Selector="Button.btn-cancel:pointerover /template/ ContentPresenter">
            <Setter Property="Background" Value="#a02528"/>
        </Style>
    </Window.Styles>

    <Grid RowDefinitions="Auto,*,Auto,Auto">
        <!-- Header -->
        <Border Grid.Row="0"
                Background="White"
                BorderBrush="#E0E0E0"
                BorderThickness="0,0,0,1"
                Padding="20,16">
            <Grid ColumnDefinitions="*,Auto">
                <StackPanel Grid.Column="0">
                    <TextBlock Text="Export Preview"
                               FontSize="20"
                               FontWeight="SemiBold"
                               Foreground="#1A1A1A"/>
                    <TextBlock x:Name="ExportTypeText"
                               Text="Review before exporting"
                               FontSize="13"
                               Foreground="#666666"
                               Margin="0,4,0,0"/>
                </StackPanel>
                <TextBlock Grid.Column="1"
                           x:Name="PageCountText"
                           Text=""
                           FontSize="13"
                           Foreground="#666666"
                           VerticalAlignment="Center"/>
            </Grid>
        </Border>

        <!-- Preview Content - PDF Pages -->
        <Border Grid.Row="1" Margin="20,16,20,8" Background="#E8E8E8" CornerRadius="8">
            <ScrollViewer x:Name="PreviewScrollViewer"
                          HorizontalScrollBarVisibility="Disabled"
                          VerticalScrollBarVisibility="Auto">
                <ItemsControl x:Name="PagesContainer">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Vertical" Spacing="16"/>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border Background="White"
                                    CornerRadius="4"
                                    BoxShadow="0 2 8 0 #30000000"
                                    Margin="20,8"
                                    HorizontalAlignment="Center">
                                <Image Source="{Binding}"
                                       Stretch="Uniform"
                                       MaxWidth="700"/>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
        </Border>

        <!-- Save Location Section -->
        <Border Grid.Row="2"
                Background="White"
                BorderBrush="#E0E0E0"
                BorderThickness="0,1,0,0"
                Padding="20,12">
            <Grid ColumnDefinitions="Auto,*,Auto">
                <TextBlock Grid.Column="0"
                           Text="Save to:"
                           VerticalAlignment="Center"
                           FontWeight="SemiBold"
                           Foreground="#1A1A1A"
                           Margin="0,0,12,0"/>
                <TextBox Grid.Column="1"
                         x:Name="FilePathTextBox"
                         VerticalAlignment="Center"
                         Background="#FAFAFA"
                         BorderBrush="#D0D0D0"
                         CornerRadius="4"
                         Padding="10,8"
                         FontSize="12"/>
                <Button Grid.Column="2"
                        x:Name="BrowseButton"
                        Content="Browse..."
                        Padding="16,8"
                        Margin="12,0,0,0"
                        Classes="btn-blue"
                        Background="#007AFF"
                        Foreground="White"
                        CornerRadius="6"
                        Click="OnBrowseClick"/>
            </Grid>
        </Border>

        <!-- Footer with buttons -->
        <Border Grid.Row="3"
                Background="White"
                BorderBrush="#E0E0E0"
                BorderThickness="0,1,0,0"
                Padding="20,16">
            <Grid ColumnDefinitions="*,Auto,Auto">
                <TextBlock Grid.Column="0"
                           x:Name="StatusText"
                           VerticalAlignment="Center"
                           Foreground="#666666"
                           FontSize="12"
                           TextTrimming="CharacterEllipsis"/>
                <Button Grid.Column="1"
                        x:Name="CancelButton"
                        Content="Cancel"
                        Padding="24,10"
                        Margin="0,0,12,0"
                        Classes="btn-cancel"
                        Background="#D13438"
                        Foreground="White"
                        CornerRadius="6"
                        Click="OnCancelClick"/>
                <Button Grid.Column="2"
                        x:Name="ConfirmButton"
                        Content="Confirm Export"
                        Padding="24,10"
                        Classes="btn-confirm"
                        Background="#107C10"
                        Foreground="White"
                        CornerRadius="6"
                        Click="OnConfirmClick"/>
            </Grid>
        </Border>
    </Grid>
</Window>
